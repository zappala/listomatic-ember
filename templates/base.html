<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <title>{% block title %}List-o-matic{% endblock %}</title>
  <link rel="stylesheet" href="/static/normalize/normalize.css" />
  <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css" />
  <link href='http://fonts.googleapis.com/css?family=Romanesco' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Condiment' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/static/css/app.css" />
</head>

<body>

  <script type="text/x-handlebars" data-template-name="list">
    <nav class="navbar navbar-default" role="navigation">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="container">
	<div class="navbar-header">
	  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
	    <span class="sr-only">Toggle navigation</span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	  </button>
	  <a class="navbar-brand" href="/">List-o-matic</a>
	</div>

	<!-- Collect the nav links, forms, and other content for toggling -->
	<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	  {% if login %}
	  <ul class="nav navbar-nav">
	    {% raw %}
	    <li>
	      {{#link-to "list.index" activeClass="selected"}}All{{/link-to}}
            </li>
            <li>
              {{#link-to "list.active" activeClass="selected"}}Active{{/link-to}}
            </li>
            <li>
	      {{#link-to "list.completed" activeClass="selected"}}Completed{{/link-to}}
            </li>
	    {% endraw %}
	  </ul>
	  <form method="get" action="/search" id="item-submit" class="navbar-form navbar-left" role="search">
	    <div class="form-group">
              <input name="search" type="text" class="form-control" placeholder="Search">
	    </div>
	    <button type="submit" class="btn btn-default">Submit</button>
	  </form>
	  {% endif %}
	  <ul class="nav navbar-nav navbar-right">
	    {% if login %}
	    <li><a href="/auth/logout">Logout</a></li>
	    {% else %}
	    <li><a href="/auth/login"><img src="/static/img/sign-in-with-twitter-gray.png"></a></li>
	    {% endif %}
	  </ul>
	</div><!-- /.navbar-collapse -->
      </div>
    </nav>

    <div id="content" class="container">
      {% if login %}
      <p>Lovingly created for <em>{{ name }}</em></p>

      {% if search %}
      <p class="search">You searched for items containing <em>{{ search|safe }}</em> </p>

      {% else %}
      {% raw %}
      <section id="todoapp">
	<header id="header">
	  <div class="row">
	    <div class="col-md-6">
	      <p>
		<span id="list-count" class="label label-default">
		  <strong>{{remaining}}</strong> {{inflection}}
		</span>
	      </p>
	      <p><i>Double-click to edit an item</i></p>
	    </div>
	    <div class="col-md-6 right">
	      {{#if hasCompleted}}
	      <button class="btn btn-warning btn-md" id="clear-completed" {{action "clearCompleted"}}>Clear completed ({{completed}})
	      </button>
	      {{/if}}
	    </div>
	  </div>
	</header>

	<section id="main">
	  <header id="input">
	    {{ input type="text" id="new-item" placeholder="Enter a new item"
	    value=newTitle action="createItem" }}
	  </header>
	  {{outlet}}
	</section>
      </section>
      {% endraw %}

      {% endif %}

      {% endif %}

    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="list/index">
    {% raw %}
    <ul id="todo-list">
      {{#each itemController="item"}}
      <li {{bind-attr class="isCompleted:completed isEditing:editing"}}>
	{{#if isEditing}}
	{{edit-item class="edit" value=title focus-out="acceptChanges"
	insert-newline="acceptChanges"}}
	{{else}}
	{{input type="checkbox" checked=isCompleted class="toggle"}}
	<label {{action "editItem" on="doubleClick"}}>{{title}}</label><button {{action "removeItem"}} class="destroy"></button>
	{{/if}}
      </li>
      {{/each}}
    </ul>
    {% endraw %}
  </script>

  <script src="/static/js/libs/jquery-1.10.2.js"></script>
  <script src="/static/js/libs/handlebars-1.1.2.js"></script>
  <script src="/static/js/libs/ember-1.5.1.js"></script>
  <script src="/static/js/libs/ember-data.js"></script>
  <script src="/static/js/app.js"></script>
  <script src="/static/js/models/item.js"></script>
  <script src="/static/js/controllers/list_controller.js"></script>
  <script src="/static/js/controllers/item_controller.js"></script>
  <script src="/static/js/views/edit_item_view.js"></script>
  <script src="/static/bootstrap/js/bootstrap.min.js"></script>
  <!-- to activate the test runner, add the "?test" query string parameter -->
  <script src="/static/tests/runner.js"></script>

</body>
</html>
